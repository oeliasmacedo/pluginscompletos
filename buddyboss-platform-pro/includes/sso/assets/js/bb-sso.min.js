window._bbSSOHasOpenedPopup=!1,window._bbSSOWebViewNoticeElement=null,window.BBSSOPopup=function(e,t,o,r){function n(){return/\b(iPhone|iP[ao]d)/.test(i)||/\b(iP[ao]d)/.test(i)||/Android/i.test(i)||/Mobile/i.test(i)}var i=navigator.userAgent,s=void 0!==window.screenX?window.screenX:window.screenLeft,a=void 0!==window.screenY?window.screenY:window.screenTop,d=void 0!==window.outerWidth?window.outerWidth:document.documentElement.clientWidth,c=void 0!==window.outerHeight?window.outerHeight:document.documentElement.clientHeight-22,o=n()?null:o,r=n()?null:r,s=parseInt(s+(d-o)/2,10),d=parseInt(a+(c-r)/2.5,10),a=[],c=(null!==o&&a.push("width="+o),null!==r&&a.push("height="+r),a.push("left="+s),a.push("top="+d),a.push("scrollbars=1"),window.open(e,t,a.join(",")));return window.focus&&c.focus(),window._bbSSOHasOpenedPopup=!0,c},window._bbssoDOMReady(function(){var d=JSON.parse(bbSSOVars.scriptOptions),n=(window.bbSSORedirect=function(e){if(d._redirectOverlay){var t=document.createElement("div"),o=(t.id="bb-sso-redirect-overlay",""),r="<div id='bb-sso-redirect-overlay-container'>",n="</div>",i="<div id='bb-sso-redirect-overlay-spinner'></div>",s="<p id='bb-sso-redirect-overlay-title'>"+d._localizedStrings.redirect_overlay_title+"</p>",a="<p id='bb-sso-redirect-overlay-text'>"+d._localizedStrings.redirect_overlay_text+"</p>";switch(d._redirectOverlay){case"overlay-only":break;case"overlay-with-spinner":o=r+i+n;break;default:o=r+i+s+a+n}t.insertAdjacentHTML("afterbegin",o),document.body.appendChild(t)}window.location=e},d._targetWindow||"prefer-popup"),i=!1,t=(document.querySelectorAll(' a[data-plugin="bb-sso"][data-action="connect"], a[data-plugin="bb-sso"][data-action="link"]').forEach(function(e){e.addEventListener("click",function(e){var t,o,r;i&&!i.closed?(e.preventDefault(),i.focus()):(o=!1,-1!==(t=this.href).indexOf("?")?t+="&":t+="?","current"===(r=this.dataset.redirect)?t+="redirect="+encodeURIComponent(window.location.href)+"&":r&&""!==r&&(t+="redirect="+encodeURIComponent(r)+"&"),"prefer-popup"===(n="prefer-same-window"!==n&&checkWebView()?"prefer-same-window":n)?(i=window.BBSSOPopup(t+"display=popup","bb-sso-social-connect",this.dataset.popupwidth,this.dataset.popupheight))&&(o=!0,e.preventDefault()):"prefer-new-tab"===n&&(r=window.open(t+"display=popup","_blank"))&&(window.focus&&r.focus(),o=!0,window._bbSSOHasOpenedPopup=!0,e.preventDefault()),o||(window.location=t,e.preventDefault()))})}),!1),e=document.querySelectorAll(' a[data-plugin="bb-sso"][data-provider="google"]'),e=(e.length&&checkWebView()&&e.forEach(function(e){e.remove(),t=!0}),document.querySelectorAll(' a[data-plugin="bb-sso"][data-provider="facebook"]')),e=(e.length&&checkWebView()&&/Android/.test(window.navigator.userAgent)&&!isAllowedWebViewForUserAgent("facebook")&&e.forEach(function(e){e.remove(),t=!0}),document.querySelectorAll("div.bb-sso-separator"));t&&e.length&&e.forEach(function(e){var t=e.parentNode;t&&(t=t.querySelector("div.bb-sso-container-buttons"))&&!t.hasChildNodes()&&e.remove()})}),window._bbssoDOMReady(function(){var e,t,o,r;"undefined"!=typeof containerId&&(e=document.getElementById(containerId))&&(t=(t=(t=document.querySelector(formId))||e.closest("form"))||e.parentNode,e&&t&&((o=document.createElement("div")).classList.add("bb-sso-clear"),"above-separator"===separatorPosition?t.insertBefore(o,t.firstChild):t.insertBefore(o,null),(o=e.querySelector(".bb-sso-separator"))&&o.remove(),(o=document.createElement("div")).classList.add("bb-sso-separator"),o.innerHTML=orString,"above-separator"===separatorPosition?e.appendChild(o):e.insertBefore(o,e.firstChild)),(o=e.querySelector(".bb-sso-container"))&&(r="above-separator"===separatorPosition?"bb-sso-container-buddypress-register-layout-above-separator":"bb-sso-container-buddypress-login-layout-below-separator",o.classList.add(r),o.style.display="block"),"above-separator"===separatorPosition?t.insertBefore(e,t.firstChild):t.appendChild(e))});var _bbSSOLoginBroadCastChannel,isWebView=null;function checkWebView(){var e,t,o,r;return null===isWebView&&(t=_detectOS(e=(window.navigator||{}).userAgent||""),r=_detectBrowserVersion(e,o=_detectBrowser(e)),isWebView=_isWebView(e,t,o,r,{})),isWebView}function _detectOS(e){return/Android/.test(e)?"Android":/iPhone|iPad|iPod/.test(e)?"iOS":/Windows/.test(e)?"Windows":/Mac OS X/.test(e)?"Mac":/CrOS/.test(e)?"Chrome OS":/Firefox/.test(e)?"Firefox OS":""}function _detectBrowser(e){var t=/Android/.test(e);return/Opera Mini/.test(e)||/ OPR/.test(e)||/ OPT/.test(e)?"Opera":/CriOS/.test(e)?"Chrome for iOS":/Edge/.test(e)?"Edge":t&&/Silk\//.test(e)?"Silk":/Chrome/.test(e)?"Chrome":/Firefox/.test(e)?"Firefox":t?"AOSP":/MSIE|Trident/.test(e)?"IE":/Safari\//.test(e)?"Safari":/AppleWebKit/.test(e)?"WebKit":""}function _detectBrowserVersion(e,t){return"Opera"===t?/Opera Mini/.test(e)?_getVersion(e,"Opera Mini/"):/ OPR/.test(e)?_getVersion(e," OPR/"):_getVersion(e," OPT/"):"Chrome for iOS"===t?_getVersion(e,"CriOS/"):"Edge"===t?_getVersion(e,"Edge/"):"Chrome"===t?_getVersion(e,"Chrome/"):"Firefox"===t?_getVersion(e,"Firefox/"):"Silk"===t?_getVersion(e,"Silk/"):"AOSP"===t?_getVersion(e,"Version/"):"IE"===t?/IEMobile/.test(e)?_getVersion(e,"IEMobile/"):/MSIE/.test(e)?_getVersion(e,"MSIE "):_getVersion(e,"rv:"):"Safari"===t?_getVersion(e,"Version/"):"WebKit"===t?_getVersion(e,"WebKit/"):"0.0.0"}function _getVersion(e,t){try{return _normalizeSemverString(e.split(t)[1].trim().split(/[^\w\.]/)[0])}catch(e){}return"0.0.0"}function _normalizeSemverString(e){e=e.split(/[\._]/);return(parseInt(e[0],10)||0)+"."+(parseInt(e[1],10)||0)+"."+(parseInt(e[2],10)||0)}function _isWebView(e,t,o,r,n){switch(t+o){case"iOSSafari":return!1;case"iOSWebKit":return _isWebView_iOS(n);case"AndroidAOSP":return!1;case"AndroidChrome":return 42<=parseFloat(r)?/; wv/.test(e):!!/\d{2}\.0\.0/.test(r)||_isWebView_Android(n)}return!1}function _isWebView_iOS(e){var t=window.document||{};return"WEB_VIEW"in e?e.WEB_VIEW:!("fullscreenEnabled"in t||"webkitFullscreenEnabled"in t)}function _isWebView_Android(e){return"WEB_VIEW"in e?e.WEB_VIEW:!("requestFileSystem"in window||"webkitRequestFileSystem"in window)}function isAllowedWebViewForUserAgent(e){var t=[];e&&"facebook"===e&&(t=["Instagram","FBAV","FBAN"]);e=(window.navigator||{}).userAgent||"";return!(!t.length||!e.match(new RegExp(t.join("|"))))}window.bbSSOShowMessage=function(e,t){var o,r,n;e&&(n="error"===t?"bb-hello-error":"bb-hello-success",(r=0<(r=(o=document.querySelector(".bb-hello-sso"))?o.getElementsByClassName(n):[]).length?r[0]:null)||((r=document.createElement("div")).className=n,n="error"===t?"bb-icon-rf bb-icon-exclamation":"bb-icon-rf bb-icon-check",(t=document.createElement("i")).className=n,r.appendChild(t),n=document.createTextNode(" "+e),r.appendChild(n),r.style.display="none",o&&(t=o.querySelector(".form-fields"))&&t.parentNode.insertBefore(r,t)),r.style.display="flex")},"function"==typeof BroadcastChannel&&((_bbSSOLoginBroadCastChannel=new BroadcastChannel("bb_sso_login_broadcast_channel")).onmessage=function(e){window&&window._bbSSOHasOpenedPopup&&e.data&&"redirect"===e.data.action&&(window._bbSSOHasOpenedPopup=!1,e=e.data&&e.data.href?e.data.href:null,_bbSSOLoginBroadCastChannel.close(),"function"==typeof window.bbSSORedirect?window.bbSSORedirect(e):window.opener.location=e)});